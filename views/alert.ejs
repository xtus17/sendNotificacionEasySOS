<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="EasySOS App - Plataforma de Alerta Ciudadana"
    />
    <meta
      name="keywords"
      content="EasySOS App, alertas, seguridad ciudadana, emergencias"
    />
    <meta name="author" content="Xaler" />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="EasySOS App - Alerta de Persona Desaparecida"
    />
    <meta
      property="og:description"
      content="Env√≠a alertas de personas desaparecidas de manera r√°pida y sencilla."
    />

    <!-- Bootstrap 5.3 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="icon" href="/assets/Logo.png" type="image/x-icon" />

    <style>
      :root {
        --primary-color: #ff6b35;
        --secondary-color: #004e89;
        --danger-color: #dc3545;
        --warning-color: #ffc107;
      }

      body {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        min-height: 100vh;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      .main-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }

      .header-section {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin-bottom: 25px;
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .header-section img {
        width: 70px;
        height: 70px;
        object-fit: contain;
      }

      .header-section h1 {
        margin: 0;
        color: var(--secondary-color);
        font-weight: 700;
        font-size: 2rem;
      }

      .alert-badge {
        background: var(--danger-color);
        color: white;
        padding: 5px 15px;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: 600;
        margin-left: auto;
      }

      .form-container {
        background: white;
        border-radius: 15px;
        padding: 35px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .form-container h2 {
        color: var(--secondary-color);
        font-weight: 700;
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 3px solid var(--primary-color);
      }

      .form-label {
        font-weight: 600;
        color: #333;
        margin-bottom: 8px;
      }

      .form-control,
      .form-select {
        border: 2px solid #e0e0e0;
        border-radius: 10px;
        padding: 12px 15px;
        transition: all 0.3s ease;
      }

      .form-control:focus,
      .form-select:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 0.2rem rgba(255, 107, 53, 0.25);
      }

      .btn-submit {
        background: var(--primary-color);
        border: none;
        color: white;
        padding: 15px 40px;
        font-size: 1.1rem;
        font-weight: 600;
        border-radius: 10px;
        transition: all 0.3s ease;
        width: 100%;
        margin-top: 20px;
      }

      .btn-submit:hover {
        background: #e55a2b;
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(255, 107, 53, 0.4);
      }

      .required-indicator {
        color: var(--danger-color);
        font-weight: bold;
      }

      .form-help-text {
        font-size: 0.875rem;
        color: #6c757d;
        margin-top: 5px;
      }

      .file-input-wrapper {
        position: relative;
        border: 2px dashed #e0e0e0;
        border-radius: 10px;
        padding: 30px;
        text-align: center;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .file-input-wrapper:hover {
        border-color: var(--primary-color);
        background: #fff8f6;
      }

      .file-input-wrapper input[type="file"] {
        position: absolute;
        opacity: 0;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        cursor: pointer;
      }

      .upload-icon {
        font-size: 3rem;
        color: var(--primary-color);
        margin-bottom: 10px;
      }

      @media (max-width: 576px) {
        .header-section h1 {
          font-size: 1.5rem;
        }

        .form-container {
          padding: 20px;
        }

        .alert-badge {
          position: absolute;
          top: 15px;
          right: 15px;
        }
      }

      /* ‚≠ê ANIMACI√ìN DEL BOT√ìN */
      .btn-submit.loading {
        position: relative;
        pointer-events: none;
        opacity: 0.85;
      }

      .btn-submit.loading::after {
        content: "";
        position: absolute;
        width: 16px;
        height: 16px;
        top: 50%;
        left: 50%;
        margin-left: -8px;
        margin-top: -8px;
        border: 2px solid transparent;
        border-top-color: white;
        border-radius: 50%;
        animation: spin 0.6s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .btn-submit:disabled {
        opacity: 0.7;
        cursor: not-allowed;
      }
    </style>

    <title>Alerta de Persona Desaparecida - EasySOS</title>
  </head>

  <body>
    <div class="main-container">
      <div class="header-section">
        <a href="https://www.easysos.app">
          <img src="/assets/Logo.png" alt="EasySOS Logo" />
        </a>
        <h1>EasySOS</h1>
        <span class="alert-badge">URGENTE</span>
      </div>

      <div class="form-container">
        <h2>üö® Reportar Persona Desaparecida</h2>

        <form action="/send-alert" method="post" enctype="multipart/form-data">
          <div class="mb-4">
            <label for="name" class="form-label">
              Nombre completo <span class="required-indicator">*</span>
            </label>
            <input
              type="text"
              class="form-control"
              id="name"
              name="name"
              placeholder="Ej: Juan P√©rez Garc√≠a"
              required
            />
          </div>

          <div class="row mb-4">
            <div class="col-md-6">
              <label for="age" class="form-label">
                Edad <span class="required-indicator">*</span>
              </label>
              <input
                type="number"
                class="form-control"
                id="age"
                name="age"
                placeholder="Ej: 25"
                min="0"
                max="120"
                required
              />
            </div>
          </div>

          <div class="mb-4">
            <label for="description" class="form-label">
              Descripci√≥n f√≠sica <span class="required-indicator">*</span>
            </label>
            <textarea
              class="form-control"
              id="description"
              name="description"
              rows="3"
              placeholder="Ej: Estatura aprox. 1.70m, contextura delgada, cabello negro corto, vest√≠a camisa azul y jeans..."
              required
            ></textarea>
            <div class="form-help-text">
              Incluye caracter√≠sticas distintivas: estatura, contextura, color
              de cabello, vestimenta, se√±as particulares.
            </div>
          </div>

          <div class="mb-4">
            <label for="lastSeen" class="form-label">
              √öltima vez visto en <span class="required-indicator">*</span>
            </label>
            <textarea
              class="form-control"
              id="lastSeen"
              name="lastSeen"
              rows="3"
              placeholder="Ej: Av. Principal 123, cerca del parque central, el d√≠a 08/02/2026 a las 3:00 PM"
              required
            ></textarea>
            <div class="form-help-text">
              Incluye direcci√≥n, puntos de referencia, fecha y hora aproximada.
            </div>
          </div>

          <div class="mb-4">
            <label for="photos" class="form-label">
              Fotograf√≠as recientes <span class="required-indicator">*</span>
            </label>
            <div class="file-input-wrapper">
              <div class="upload-icon">üì∏</div>
              <p class="mb-0">
                <strong>Haz clic aqu√≠ o arrastra fotos</strong>
              </p>
              <p class="form-help-text mb-0">
                Formatos: JPG, PNG (m√°x. 5 fotos)
              </p>
              <input
                type="file"
                class="form-control"
                id="photos"
                name="photos"
                multiple
                accept="image/*"
                required
              />
            </div>
          </div>

          <button type="submit" class="btn btn-submit">
            Enviar Alerta Inmediata
          </button>
        </form>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      // Preview de archivos seleccionados
      document
        .getElementById("photos")
        .addEventListener("change", function (e) {
          const files = e.target.files;
          const wrapper = e.target.closest(".file-input-wrapper");
          const text = wrapper.querySelector("p");

          if (files.length > 0) {
            text.innerHTML = `<strong>${files.length} foto(s) seleccionada(s)</strong>`;
            wrapper.style.borderColor = "#28a745";
            wrapper.style.background = "#f0fff4";
          }
        });

      // ‚≠ê LOADER AL ENVIAR FORMULARIO
      const form = document.querySelector('form[action="/send-alert"]');
      const submitBtn = document.querySelector(".btn-submit");

      form.addEventListener("submit", function (e) {
        // Deshabilitar bot√≥n
        submitBtn.disabled = true;

        // Agregar spinner y cambiar texto
        submitBtn.innerHTML = `
      <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
      Enviando alerta...
    `;

        // Cambiar estilo del bot√≥n
        submitBtn.style.opacity = "0.8";
        submitBtn.style.cursor = "not-allowed";
      });
    </script>
  </body>
</html>
